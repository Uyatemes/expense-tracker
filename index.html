<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учёт расходов</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="container header-content">
            <h1>Мои операции</h1>
            <button id="themeToggle" class="theme-toggle" aria-label="Переключить тему">
                <svg class="sun-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
                </svg>
                <svg class="moon-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
                </svg>
            </button>
        </div>
    </header>

    <main class="container">
        <!-- AI Ассистент -->
        <section class="chat-container">
            <div id="chat-messages" class="chat-messages">
                <div class="message system">
                    Привет! Я помогу записать ваши доходы и расходы. Примеры:<br>
                    "5000 расход каспий такси"<br>
                    "приход 10000 халык зарплата"
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="user-input" placeholder="Введите операцию...">
                <button id="send-message">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z"/>
                    </svg>
                </button>
            </div>
        </section>

        <!-- Фильтры и экспорт -->
        <section class="date-filter">
            <button id="dateRangeButton" class="date-range-button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM5 8V6h14v2H5zm2 4h10v2H7v-2zm0 4h7v2H7v-2z"/>
                </svg>
                <span id="dateRangeText">Загрузка...</span>
            </button>
            <button id="exportPDF" class="export-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
                Экспорт PDF
            </button>
        </section>

        <!-- Итоги -->
        <section class="totals">
            <div id="totalIncome" class="total-item income">
                <span class="total-label">Доходы</span>
                <span class="total-amount">0 ₸</span>
            </div>
            <div id="totalExpense" class="total-item expense">
                <span class="total-label">Расходы</span>
                <span class="total-amount">0 ₸</span>
            </div>
        </section>

        <!-- Список операций -->
        <div id="expensesTableBody">
            <!-- Здесь будут транзакции -->
        </div>
    </main>

    <!-- Диалог подтверждения -->
    <div id="confirmDialog" class="confirm-dialog">
        <div class="confirm-dialog-content">
            <h3>Подтверждение удаления</h3>
            <p>Вы действительно хотите удалить эту запись?</p>
            <div class="confirm-dialog-buttons">
                <button id="confirmCancel" class="btn-cancel">Отмена</button>
                <button id="confirmDelete" class="btn-delete">Удалить</button>
            </div>
        </div>
    </div>

    <!-- Вернем старую версию модального окна -->
    <div id="dateRangeModal" class="modal">
        <div class="modal-content">
            <h3>Выберите период</h3>
            <div class="period-options">
                <label class="radio-button">
                    <input type="radio" name="period" value="week" checked>
                    <span class="radio-label">За неделю</span>
                </label>
                <label class="radio-button">
                    <input type="radio" name="period" value="month">
                    <span class="radio-label">За месяц</span>
                </label>
                <label class="radio-button">
                    <input type="radio" name="period" value="custom">
                    <span class="radio-label">За период</span>
                </label>
                <div id="customDateRange" class="custom-date-range" style="display: none;">
                    <div class="date-input-group">
                        <label>С</label>
                        <input type="date" id="startDate">
                    </div>
                    <div class="date-input-group">
                        <label>По</label>
                        <input type="date" id="endDate">
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="cancelDateRange" class="btn-cancel">Отмена</button>
                <button id="applyDateRange" class="btn-apply">Применить</button>
            </div>
        </div>
    </div>

    <script src="js/theme.js"></script>
    <script src="js/date-range.js"></script>
    <script src="js/main.js"></script>
    <script src="js/ai-assistant.js"></script>
</body>
</html> 